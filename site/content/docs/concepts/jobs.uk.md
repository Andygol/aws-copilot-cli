---
tite: "Завдання"
---

# Завдання

Завдання (Job) — це завдання (task) Amazon ECS, які запускаються за подією. Наразі Copilot підтримує лише "Заплановані Завдання". Це завдання, які можуть запускатися або за фіксованим розкладом, або періодично, вказавши частоту.

## Створення Завдання

Найпростіший спосіб створити завдання — виконати команду `init` з теки з вашим Dockerfile.

```console
copilot init
```

Після того, як ви виберете, до якого застосунку має належати завдання, Copilot запитає вас про __тип__ завдання, яке ви хочете створити. Наразі Copilot підтримує лише "Заплановане Завдання".

## Конфігурація та Маніфест

Після того, як ви виконали `copilot init`, CLI створить файл з назвою `manifest.yml` у теці `copilot/[назва завдання]/`. [Маніфест запланованого завдання](../../manifest/scheduled-job/) — це простий декларативний файл, який містить найпоширеніші налаштування для завдання, яке запускається за запланованою подією. Наприклад, ви можете налаштувати, коли ви хочете запустити завдання, розмір контейнера, тайм-аут для завдання, а також кількість спроб у разі невдач.

## Розгортання Завдання

Після того, як ви налаштували файл маніфесту відповідно до ваших вимог, ви можете розгорнути зміни за допомогою команди deploy:

```console
copilot deploy
```

Виконання цієї команди:

1. Збере ваш образ локально
2. Завантажить його до репозиторію ECR вашого завдання
3. Перетворить файл маніфесту на шаблон CloudFormation
4. Упакує будь-яку додаткову інфраструктуру в шаблон CloudFormation
5. Розгорне ваші ресурси

## Інші опції, повʼязані з Завданням

Припустимо, ви хочете протестувати нове завдання або запустити його з якоїсь іншої причини. Використовуйте команду [`job run`](../../commands/job-run/):

```console
copilot job run
```

Якщо ви хочете тимчасово вимкнути своє завдання, не видаляючи його повністю, встановіть розклад на `none` у вашому [маніфесті](../../manifest/scheduled-job/):

```yaml
on:
  schedule: "none"
```

Щоб вивести шаблон CloudFormation для налаштованого завдання, виконайте команду [`job package`](../../commands/job-package/):

```console
copilot job package
```

### Що входить до Завдання?

Оскільки Copilot використовує CloudFormation під капотом, усі створені ресурси видимі та позначені Copilot. Заплановані Завдання складаються з AmazonECS Task Definition (Визначення Завдання AmazonECS), Task Role (Ролі Завдання), Task Execution Role (Ролі Виконання Завдання), Step Function State Machine (Машини Станів Step Function) для повторних спроб у разі невдач, і нарешті Event Rule (Правила Події) для запуску машини станів.

### Де знаходяться логи мого Завдання?

Перевірка логів вашого завдання також проста. Виконання [`copilot job logs`](../../commands/job-logs/) покаже найновіші логи вашого завдання. Ви можете слідкувати за своїми логами в реальному часі за допомогою прапорця `--follow`, який буде показувати логи з будь-якого нового запуску вашого завдання після виконання команди.

```console
$ copilot job logs
copilot/myjob/37236ed Doing some work
copilot/myjob/37236ed Did some work
copilot/myjob/37236ed Exited...
copilot/myjob/123e300 Doing some work
copilot/myjob/123e300 Did some work
copilot/myjob/123e300 Did some additional work
copilot/myjob/123e300 Exited
```
